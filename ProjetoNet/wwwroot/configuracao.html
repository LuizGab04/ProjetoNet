<!DOCTYPE html>
<html>
<head>
    <script>
        window.addEventListener("DOMContentLoaded", () => {
            const token = localStorage.getItem("token");
            const nome = localStorage.getItem("nome_usuario")
            const foto = localStorage.getItem("foto_perfil")

            document.getElementById("nomeUsuario").innerHTML = `<p>Olá, ${nome}!</p>`

            if (foto) {
                document.getElementById("fotoUsuario").innerHTML = `<img src="data:image/jpeg;base64,${foto}"/> `
            }
         
            if (!token) {
                window.location.href = "login.html";
            }
        });</script>
    <meta charset="utf-8" />
    <title>Fabrica de Software | Configuração Usuario</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
</head>
<body>
    <main>
        <div id="campo-foto">
            <div id="nomeUsuario">

            </div>
            <input type="file" id="inputFoto" accept="image/*" />
            <button id="enviarFoto">Enviar Foto</button>

            <div id="fotoUsuario">
                
            </div>
        </div>
        <div>

        </div>
    </main>
    <script type="module">
        import { Usuario } from "../Modelos/ModeloUsuario.js"
        enviarFoto.onclick = async () => {
            const input = document.getElementById("inputFoto");
            const file = input.files[0];

            if (!file) {
                alert("Selecione uma imagem.");
                return;
            }

            const formData = new FormData();
            formData.append("foto", file);

            const resposta = await Usuario.uploadFoto(formData)
        }

    </script>
</body>
</html>